<!DOCTYPE html>
<html lang="en">

<head>
	<title>Davies Odu|Bohao Huang</title>
	<meta charset="utf-8" />
	<!-- load bootstrap css -->
	{% load staticfiles %}
	<!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script> -->
	<link rel="stylesheet" type="text/css" href="{% static 'sentiWebApp/css/bootstrap.min.css' %}">
	<!-- <script type="text/javascript" src="{% static 'sentiWebApp/js/bootstrap.min.js' %}"></script> -->
	  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
     <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
     <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<!-- flask style reference -->
	<meta name="viewport" content = "width=device-width, initial-scale=1.0">
	
	<style type="text/css">
		html,
		body, head {
		  height:100%;
		  font: 100 12px/1.5 monospace,"Helvetica Neue","Raleway", Helvetica, Arial, sans-serif;

		}
		.inline-cust {
		  width: 300px;
		  padding : 40px;
		}

		/*loading*/
		#loading {
			left : 50%;
			top : 50%;
			position : absolute;
			z-index : 101;
			border: 16px solid #f3f3f3;
			border-radius: 50%;
			border-top: 16px solid #3498db;
			width: 120px;
			height: 120px;
			-webkit-animation: spin 2s linear infinite;
			animation: spin 2s linear infinite;
		}

		@-webkit-keyframes spin {
			0% { -webkit-transform: rotate(0deg); }
			100% { -webkit-transform: rotate(360deg); }
		}

		@keyframes spin {
			0% { transform: rotate(0deg); }
			100% { transform: rotate(360deg); }
		}
	</style>
</head>

<body class="body" style="background-color:#f6f6f6; text-align: center; ">
<!-- ****************************************************************************************** -->
	<div class="container-fluid" style="min-height:95%; ">
		<div class="row">
			<div class="col-sm-2">
				<center>
					<img src="{% static 'sentiWebApp/senti_image.png' %}" class="responsive-img" style='max-height:150px;' alt="face">
				</center>
			</div>
			<div class="col-sm-10" style="font-weight: 300; font-size: 25px;">
				<center>
					<br>
					<p> Senti-Wiz </p>
					<p> Twitter Sentiment Analysis and Visualization </p>
				</center>
			</div>
		</div><hr>
<!-- ****************************************************************************************** -->
<form id = "form" method = "post" >
  <!-- {% csrf_token %} -->
		<div class = "row">
			<!-- 1 Input Team 1 -->
			<div class = "input" style="font-size: 15px; ">
				<!--  -->
				<div class="col-md-3">  <!-- size text box-->
					<div class="input-group input-group-lg">
						<span class="input-group-addon" id="sizing-addon1">Keyword</span>
						 <input id = "input-phrase"  type="text" class="form-control" placeholder="Enter a word/phrase and select a State" aria-describedby="sizing-addon1" name = "index">
						
					</div>
				</div>  
			</div>

			<!-- 1 Input Team 2  -->
			<div class = "input" style="font-size: 15px; ">
				<!--  -->
				<div class="col-md-3">  <!-- size text box-->
					<div class="input-group input-group-lg">
						<span class="input-group-addon" id="sizing-addon1">Keyword</span>
						 <input id = "input-phrase"  type="text" class="form-control" placeholder="Enter a word/phrase and select a State" aria-describedby="sizing-addon1" name = "index">
						
					</div>
				</div>  
			</div>


			<!-- 2 Large button group -->
<!-- 			<div class="btn-group">

				<select id = "input-state"  style= "color: #959595 !important;" class="form-control input-lg">
					<option value="" > Select State</option>
					<option value="AK">Alaska</option>
					<option value="AL">Alabama</option>
					<option value="AR">Arkansas</option>
					<option value="AZ">Arizona</option>
					<option value="CA">California</option>
					<option value="CO">Colorado</option>
					<option value="CT">Connecticut</option>
					<option value="DC">District of Columbia</option>
					<option value="DE">Delaware</option>
					<option value="FL">Florida</option>
					<option value="GA">Georgia</option>
					<option value="HI">Hawaii</option>
					<option value="IA">Iowa</option>
					<option value="ID">Idaho</option>
					<option value="IL">Illinois</option>
					<option value="IN">Indiana</option>
					<option value="KS">Kansas</option>
					<option value="KY">Kentucky</option>
					<option value="LA">Louisiana</option>
					<option value="MA">Massachusetts</option>
					<option value="MD">Maryland</option>
					<option value="ME">Maine</option>
					<option value="MI">Michigan</option>
					<option value="MN">Minnesota</option>
					<option value="MO">Missouri</option>
					<option value="MS">Mississippi</option>
					<option value="MT">Montana</option>
					<option value="NC">North Carolina</option>
					<option value="ND">North Dakota</option>
					<option value="NE">Nebraska</option>
					<option value="NH">New Hampshire</option>
					<option value="NJ">New Jersey</option>
					<option value="NM">New Mexico</option>
					<option value="NV">Nevada</option>
					<option value="NY">New York</option>
					<option value="OH">Ohio</option>
					<option value="OK">Oklahoma</option>
					<option value="OR">Oregon</option>
					<option value="PA">Pennsylvania</option>
					<option value="PR">Puerto Rico</option>
					<option value="RI">Rhode Island</option>
					<option value="SC">South Carolina</option>
					<option value="SD">South Dakota</option>
					<option value="TN">Tennessee</option>
					<option value="TX">Texas</option>
					<option value="UT">Utah</option>
					<option value="VA">Virginia</option>
					<option value="VT">Vermont</option>
					<option value="WA">Washington</option>
					<option value="WI">Wisconsin</option>
					<option value="WV">West Virginia</option>
					<option value="WY">Wyoming</option>
				</select>
			</div>
 -->
			<!-- Submit Button -->
			<a class = "inline-cust">
			<!-- <form id = "form"> -->
				<!-- btn btn-primary btn-lg -->
					<div class="btn btn-primary btn-lg" method = "POST" role="button" onclick ="handleQuery()">Query</div> 
				
			<!-- </form> -->
			</a>


	</div>	
</form>	
	<br>{{PS }}<br>
	<h1 id = "loading" ></h1>
<!-- **********ss******************************************************************************** -->
	<!-- 	<div class="form-group">
			<label for="comment">Comment:</label>
			<textarea class="form-control" rows="5" id="comment"></textarea>
		</div> -->
<!-- ****************************************************************************************** -->
		<label for="sel2">View retrieved tweets below: Click on the Analyze to proceed to tweet analysis</label>
		<div class="input-group">
		    <textarea  id="result" class="form-control custom-control" rows="10" style="resize:none"></textarea>     
		    <span id = "analyze-button" class="input-group-addon btn btn-primary">Analyze</span>
		</div>

</div> 

<footer>

	<div class="container-fluid" style='margin-left:15px'>
		{% block content %}
		{% endblock %}	
		<p> Checkout on <a href="https://github.com/qingshuimonk/bhtsa" target="blank">Github</a> </p>
	</div>
</footer>	
</body>

<script type="text/javascript">


   $( document.body ).on( 'click', '.dropdown-menu li', function( event ) {
      var $target = $(event.currentTarget);

      $target.closest( '.btn-group' )
         .find( '[data-bind="label"]' ).text( $target.text() )
            .end()
         .children( '.dropdown-toggle' ).dropdown( 'toggle' );
      return false;
   });

   //Query button listener
   function handleQuery(){
   	var phrase =  document.getElementById("input-phrase").value;
   	var State =  document.getElementById("input-state").value;
   	// var phrase_state = phrase + "-"+ State;
   	var phrase_state = phrase;

   	//RENDER THIS TO BACK END
   	do_get(phrase_state);
   }
$('#loading').hide();

function do_get(phrase_state){
	console.log(phrase_state);
	var txt = $("textarea#form-control custom-control");
	txt.val( txt.val() + "\n"+phrase_state);


	request = $.ajax({
		type: "POST",
		url: '/bp',
		data:
		{
			phrase_state: phrase_state,
			'csrfmiddlewaretoken': '{{ csrf_token }}'
		},
		beforeSend: function() { 
			$('#loading').show();
			$('#result').hide();
			$("analyze-button").hide();
		},
		complete: function() {
		 $('#loading').hide(); 
		 $('#result').show();
		 $("analyze-button").show();
		}

	});

	request.done(function(data){
		$("#result").text(data);

	});

}

</script>

</html>











